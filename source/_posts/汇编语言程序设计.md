---
title: 汇编语言程序设计
date: 2020-06-28 16:29:28
categories: 汇编语言程序设计
tags:
- 汇编语言程序设计
---

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="https://s1.ax1x.com/2020/06/28/N2R1Bj.md.png">
    <br>
    <div style="color:orange;
    display: inline-block;
    color: #999;
    padding: 2px;">眼神</div>
</center>

> 此文为学习汇编语言程序设计所做的笔记

<!-- more -->

### 第一章 汇编语言基础

#### 一、硬件组成


从应用角度看，汇编语言程序员可以将计算机抽象为：寄存器、存储器地址、输入输出地址

##### 1.寄存器

- 处理器内部的高速存储单元
- 用于暂时存放程序执行过程中的代码和数据
- 透明寄存器：对应用人员不可见、不能编程直接控制
- 可编程寄存器：通用寄存器、专用寄存器

##### 2.通用寄存器
- 32位通用寄存器：EAX、EBX、ECX、EDX；ESI、EDI；EBP、ESP
- 16位通用寄存器：AX、BX、CX、DX、SI、DI、BP、SP
- 8位通用寄存器：AH、AL、BH、BL、CH、CL、DH、DL

##### 3.专用寄存器
- 标志寄存器：EFLAGS
- 指令指针寄存器：EIP
- 段寄存器：CS、DS、SS、ES、FS、GS

##### 4.通用寄存器名称
- EAX：累加器
- EBX：基址寄存器
- ECX：计数器
- EDX：数据寄存器
- ESI：源变址寄存器
- EDI：目的编制寄存器
- EBP：基址指针
- ESP：堆栈指针

#### 二、存储器组织

##### 1.存储器地址

- 主存储器容量很大，被划分成许多存储单元
- 每个存储单元被编排一个号码、即存储单元地址
- 每个存储单元一字节为基本存储单位，即按字节编址，一个字节等于8bit

##### 2.位、字节、字、双字

双字 = 2 字 = 4字节 = 32 位

##### 3.存储模型
- 高性能处理器集成存储管理单元MMU
- 操作系统利用MMU进行主存进行管理
- IA-32处理处理器提供3种存储模型：平展存储模型、段式存储模型、实地址存储模型

##### 4.存储空间分段管理
“段”是保存相关代码或数据的一个主存区域

- 代码段：存放程序的可执行代码
- 数据段：存放程序所有的数据，例如全局变量
- 堆栈段：程序需要的特殊区域，存放放回地址、临时变量等

##### 5.逻辑地址
- 存储器空间可以分段管理，采用逻辑地址指示
- 逻辑地址 = 段地址 ： 偏移地址
- 处理器内部以及程序员编程时采用逻辑地址

##### 6.物理地址和逻辑地址的转换

- 程序员编程时采用逻辑地址
- 操作系统利用存储管理单元MMU将逻辑地址映射为线性地址（虚拟地址）
- 处理器使用物理地址访问存储器芯片

##### 7.Win32的虚拟地址分配
- 系统区（2GB）：操作系统代码、系统DLL等
- 用户区（2GB）：用户DLL、进程堆栈、DOS/Win16兼容区、空指针区、

##### 8.标志寄存器
- 状态寄存器：记录指令执行结果的辅助信息
- 控制标志：方向DF，仅用于串操作指令
- 系统标志：控制操作系统或核心管理程序的操作方式

##### 9.指令指针寄存器EIP
- 顺序执行时自动增量
- 分支、调用等操作时执行控制转移指令修改
- 出现中断或异常时被处理器赋值二相应改变

##### 10.段寄存器
段寄存器表明某个段在主存中的位置

- 代码段（CS）——基地址由代码段CS指示、偏移地址由指令指针寄存器EIP保存
- 堆栈段（SS）——基地址由SS指示、偏移地址由ESP指示
- 数据段（DS、ES、FS、GS）——段基地址由DS指示，有时也由ES、FS、GS指示，偏移地址由有效地址EA指示

#### 三、处理器指令格式

##### 1.处理器指令
- 程序用程序设计语言编写，有指令构成
- 指令由操作码和操作数组成
- 操作码在汇编语言使用指令助记符表示
- 操作数在汇编语言中使用寄存器、变量、常量等形式表示

##### 2.IA-32处理器的代码格式
- IA-32处理器采用可变长的指令格式
- 操作码——可选的指令前缀；1~3字节的主要操作吗
- 操作数——可选的地址域、可选的的位移量、可选的立即数

##### 3.汇编语言语句

- 源程序由语句组成
- 通常一个语句占一行
- 一个语句不操作132个字符，4个部分
- 执行性语句：表达处理器指令、实行功能
- 说明性语句：表达伪指令，控制编程方式

##### 4.标号和名字
- 标号和名字是用户定义的标识符
- 标号在执行性语句中
- 名字在说明性语句中

##### 5.标识符
- 取名原则类似于高级语言，但是默认不区别大小写字母
- 不能以数字开头
- 在一个源程序中，用户定义的每个标识符必须唯一
- 不能是保留字

##### 6.助记符
- 帮助记忆指令功能的符号
- 硬指令助记符表示处理器指令
- 伪指令助记符表达一个汇编命令

##### 7.包含伪指令INCLUDE
- 用于声明常用的常量定义、过程说明、共享的子程序库等
- 相当于C和C++语言中，包含头文件的作用
  
##### 8.程序的开始和结束
- 程序开始执行的位置（使用一个标号，作为汇编结束END伪指令的参数）
- 应用程序执行终止（语句“EXIT 0”终止程序执行，返回操作系统，提供一个返回代码0）
- 源程序汇编结束——使用END伪指令语句